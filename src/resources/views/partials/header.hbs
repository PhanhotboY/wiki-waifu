<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid mx-5">
        <a class="navbar-brand" href="/">PhanhotboY</a>
        <button
            class="navbar-toggler mb-2"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
        >
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul
                class="navbar-nav flex-grow-1 mb-2 mb-lg-0 d-flex justify-content-between"
            >
                <li class="nav-item">
                    <form class="d-flex" role="search">
                        <input
                            class="form-control me-2"
                            type="search"
                            placeholder="Search"
                            aria-label="Search"
                            name="waifuName"
                        />
                        <button class="btn btn-outline-success" type="submit">
                            Search
                        </button>
                    </form>
                </li>
                <li class="d-flex">
                    <a href="/">
                        <img
                            src="https://thicc.mywaifulist.moe/waifus/2079/692ceac0413bd67f033558501f8e480f0f8010e6bc1afafff991e6eff06e770d_thumb.png"
                            alt=""
                            class="avatar"
                        />
                    </a>
                    <ul class="navbar-nav">
                        <li class="nav-item dropdown">
                            <a
                                class="nav-link dropdown-toggle"
                                href="#"
                                id="navbarDarkDropdownMenuLink"
                                role="button"
                                data-bs-toggle="dropdown"
                                aria-expanded="false"
                            >
                                PhanhotboY
                            </a>
                            <ul
                                class="dropdown-menu dropdown-menu-dark"
                                aria-labelledby="navbarDarkDropdownMenuLink"
                            >
                                <li>
                                    <a class="dropdown-item" href="/waifus/list"
                                        >All Waifu</a
                                    >
                                </li>
                                <li>
                                    <a
                                        class="dropdown-item"
                                        href="/waifus/create"
                                        >Add Waifu</a
                                    >
                                </li>
                                <li>
                                    <a
                                        class="dropdown-item"
                                        href="/waifus/abandoned"
                                        >Abandoned Waifu</a
                                    >
                                </li>

                                <li><hr class="dropdown-divider" /></li>

                                <li>
                                    <a class="dropdown-item" href="/"
                                        >Log out</a
                                    >
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- handle searcher -->
<script>
    const searcher = document.querySelector('#navbarSupportedContent form');
    const searchBtn = searcher.lastElementChild;

    searchBtn.onclick = () => {
        if (searcher.firstElementChild.value) {
            searcher.setAttribute('method', 'POST');
            searcher.setAttribute('action', '/waifus/filter/');
        } else {
            searcher.setAttribute('method', 'GET');
            searcher.setAttribute('action', '/search');
        }
    };
</script>
